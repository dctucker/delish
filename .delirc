ls = {
  local $pwd = Path.pwd
  for $f in $pwd.list {
    $stat = $f.stat
    local $mode = $stat.mode
    local $str = ""
    if ( $mode and 040000 ) == 0 {
      $str += "-"
    } else {
      $str += "d"
    }
    if ( $mode and 0400 ) == 0 {
      $str += "-"
    } else {
      $str += "r"
    }
    if ( $mode and 0200 ) == 0 {
      $str += "-"
    } else {
      $str += "w"
    }
    if ( $mode and 0100 ) == 0 {
      $str += "-"
    } else {
      $str += "x"
    }
    if ( $mode and 040 ) == 0 {
      $str += "-"
    } else {
      $str += "r"
    }
    if ( $mode and 020 ) == 0 {
      $str += "-"
    } else {
      $str += "w"
    }
    if ( $mode and 010 ) == 0 {
      $str += "-"
    } else {
      $str += "x"
    }
    if ( $mode and 04 ) == 0 {
      $str += "-"
    } else {
      $str += "r"
    }
    if ( $mode and 02 ) == 0 {
      $str += "-"
    } else {
      $str += "w"
    }
    if ( $mode and 01 ) == 0 {
      $str += "-"
    } else {
      $str += "x"
    }
    out $str, " ", $f
    #.stat.mode.oct, " ", $f
  }
}
ls
